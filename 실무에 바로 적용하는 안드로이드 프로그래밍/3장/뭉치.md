# 액티비티 생명주기

- Activity의 모든 인스턴스는 생명주기를 갖는다.
    - 재개(resumed)
    - 일시 중지(paused)
    - 중단(stopped)
    - 존재하지 않음(nonexistent)

![](https://user-images.githubusercontent.com/39554623/117298233-18e4ed80-aeb2-11eb-9cc3-f4a0f93a3d0f.jpeg)

- 액티비티 인스턴스가 **메모리에 있거나, 사용자에게 보이거나, 사용자의 입력을 받을 때나,** 포그라운드에서 실행 중일 때

## 상태

| 상태 | 메모리에 있음? | 사용자에게 보임? | 포그라운드에서 실행? |
| --- | --- | --- | --- |
| 존재하지 않음 | X | X | X |
| 중단 | O | X | X |
| 일시 중지 | O | O(부분적)
→ 상황에 따라 일시 중지된 액티비티의 전체 또는 일부가 사용자에게 보일 수 있음 | X |
| 실행 재개 | O | O | O |

### 존재하지 않음

- 액티비티가 아직  론칭되지 않았거나 소멸됨
- 때로는 `소멸(destroyed)` 상태라고 표현
- 메모리 존재 X
- 사용자 상호작용 X

### 중단

- 메모리 존재
- 사용자 상호작용 X

### 일시 중지

- 포그라운드에서 작동 X
- 뷰 전체 혹은 일부 화면에서 볼 수 있음
- 사용자가 다중 창 모드로 두 개의 액티비티를 같이 본다면 화면은 보이지만 포그라운드에는 존재하지 않을 수 있다

### 실행 재개

- 메모리 존재
- 화면 전체 볼 수 있음
- 한 액티비티가 실행 재개 상태가 되면 직전에 실행 중이던 액티비티는 다른 상태로 바뀐다

- `생명주기 콜백` : 함수들을 이용해서 액티비티 생명주기의 전환 시점에 필요한 일을 처리하는 것
    - `onCreate(..)`
        - 위젯을 인플레이트해 뷰 객체로 생성한 후 화면에 보여준다(setContentView() 호출)
        - 인플레이트 된 위젯의 객체 참조 얻음
        - 사용자와의 상호 작용을 처리하기 위해 위젯에 리스너 설정
        - 외부의 모델 데이터를 연결

## 로깅

```kotlin
Log.d(TAG, "...")
```

을 통해 생명주기 콜백 함수에 로깅 할 수 있다.

### 1. 앱을 런칭한 후 생명주기 순서

1. onCreate
2. onStart
3. onResume

### 2. A > B 뷰로 이동할 때 finish 처리를 하지 않았을 때 생명주기 순서

1. A의 onPause
2. B의 onCreate
3. B의 onStart
4. B의 onResume
5. A의 onStop

### 3. A > B 뷰로 이동할 때 finish 처리를 했을 때 A의 생명주기 순서

1. A의 onPause
2. B의 onCreate
3. B의 onStart
4. B의 onResume
5. A의 onStop
6. A의 onDestroy
- `finish()` : 액티비티를 끝냈다는 의미로 해당 액티비티를 소멸시키고 메모리로부터 모든 흔적을 지우게 하는 함수

### 4. A 뷰에서 홈 화면을 눌렀을 때 생명주기 순서

1. onPause
2. onStop

### 5. 홈 화면에서 오버뷰로 다시 A 뷰로 진입할 때 생명주기 순서

1. onStart
2. onResume

### 6. 화면을 회전했을 때 생명주기 순서

1. onPause
2. onStop
3. onDestroy
4. onCreate
5. onStart
6. onResume
- 이유) 장치의 방향이 바뀔 때마다 인스턴스가 완전히 소멸한다.
    
    → 즉, 현재의 Activity 인스턴스가 완전히 소멸되며, 메모리에서 지워진다.
    
### 7.  A > B 로 이동할 때 B 뷰가 `android:windowIsTranslucent="true"` 일 경우의 생명주기 순서

1. A의 onPause
2. B의 onCreate
3. B의 onStart
4. B의 onResume
5. A의 onStop
   
## 장치 구성 변경

- 장치를 회전하면 장치 구성이 변경된다.
    - 장치 구성: 각 장치의 현재 상태를 나타내는 특성들의 집합
        - 화면 방향, 화면 밀도, 화면 크기, 키보드 타입, 다크 모드, 언어 등
- **런타임 구성 변경** 이 생길 때는 **새로운 구성에 더 잘 맞는 리소스가 있을 수 있다.** 따라서, 안드로이드는 현재의 액티비티 인스턴스를 소멸시키고 새로운 구성에 가장 적합한 리소스를 찾는다.

## 가로 방향 뷰 생성

- res > Android Resource File > Available qualifiers > Orientation > Landscape
    
- 가로 방향 레이아웃일 때는 `res/layout-land/` 에 들어감
